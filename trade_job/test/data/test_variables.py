from pandas import Timestamp
import pandas as pd
import numpy as np

stock_data_df = pd.DataFrame({
            'open': {
                ('AAPL', Timestamp('2024-02-09 18:29:00+0000', tz='UTC')): 189.46,
                ('AAPL', Timestamp('2024-02-09 18:30:00+0000', tz='UTC')): 189.48,
                ('AAPL', Timestamp('2024-02-09 18:31:00+0000', tz='UTC')): 189.47
                },
            'close': {
                ('AAPL', Timestamp('2024-02-09 18:29:00+0000', tz='UTC')): 189.4701,
                ('AAPL', Timestamp('2024-02-09 18:30:00+0000', tz='UTC')): 189.48,
                ('AAPL', Timestamp('2024-02-09 18:31:00+0000', tz='UTC')): 189.4589
                }
            })

rolling_average_values = pd.Series({
                                       "2024-02-09 23:58:00+00:00": np.nan,
                                       "2024-02-09 23:59:00+00:00": np.nan,
                                       "2024-02-10 00:03:00+00:00": np.nan,
                                       "2024-02-10 00:08:00+00:00": 150
                                       })

test_orders = [
    {
      "id": "880938f0-6b96-4de1-9232-f3c25c0af224",
      "client_order_id": "bee9f504-6549-438b-be0f-57e114373453",
      "created_at": "2024-07-26T20:28:03.732726Z",
      "updated_at": "2024-07-29T13:30:22.568069Z",
      "submitted_at": "2024-07-29T08:00:06.518151Z",
      "filled_at": "2024-07-29T13:30:22.566638Z",
      "expired_at": None,
      "canceled_at": None,
      "failed_at": None,
      "replaced_at": None,
      "replaced_by": None,
      "replaces": None,
      "asset_id": "b0b6dd9d-8b9b-48a9-ba46-b9d54906e415",
      "symbol": "AAPL",
      "asset_class": "us_equity",
      "notional": None,
      "qty": "4",
      "filled_qty": "2",
      "filled_avg_price": "1",
      "order_class": "",
      "order_type": "market",
      "type": "market",
      "side": "sell",
      "position_intent": "sell_to_close",
      "time_in_force": "day",
      "limit_price": None,
      "stop_price": None,
      "status": "filled",
      "extended_hours": False,
      "legs": None,
      "trail_percent": None,
      "trail_price": None,
      "hwm": None,
      "subtag": None,
      "source": "access_key"
    },
    {
      "id": "cc7767c2-45ce-47d5-bb88-6d114856a209",
      "client_order_id": "80aec0ec-51d3-4894-8c5d-2adc724f2257",
      "created_at": "2024-07-21T08:31:19.223056Z",
      "updated_at": "2024-07-22T13:30:15.965549Z",
      "submitted_at": "2024-07-22T08:00:05.524805Z",
      "filled_at": "2024-07-22T13:30:15.963587Z",
      "expired_at": None,
      "canceled_at": None,
      "failed_at": None,
      "replaced_at": None,
      "replaced_by": None,
      "replaces": None,
      "asset_id": "b0b6dd9d-8b9b-48a9-ba46-b9d54906e415",
      "symbol": "AAPL",
      "asset_class": "us_equity",
      "notional": None,
      "qty": "1",
      "filled_qty": "1",
      "filled_avg_price": "2",
      "order_class": "",
      "order_type": "market",
      "type": "market",
      "side": "sell",
      "position_intent": "buy_to_open",
      "time_in_force": "day",
      "limit_price": None,
      "stop_price": None,
      "status": "filled",
      "extended_hours": False,
      "legs": None,
      "trail_percent": None,
      "trail_price": None,
      "hwm": None,
      "subtag": None,
      "source": "access_key"
    },
    {
      "id": "ddfea2ba-2176-4b82-a0bf-47e3ed7dbb76",
      "client_order_id": "15500864-a3d5-477b-894d-24645c61810b",
      "created_at": "2024-07-21T08:31:34.191102Z",
      "updated_at": "2024-07-22T13:30:10.878564Z",
      "submitted_at": "2024-07-22T08:00:05.512129Z",
      "filled_at": "2024-07-22T13:30:10.876964Z",
      "expired_at": None,
      "canceled_at": None,
      "failed_at": None,
      "replaced_at": None,
      "replaced_by": None,
      "replaces": None,
      "asset_id": "b0b6dd9d-8b9b-48a9-ba46-b9d54906e415",
      "symbol": "AAPL",
      "asset_class": "us_equity",
      "notional": None,
      "qty": "1",
      "filled_qty": "3",
      "filled_avg_price": "1",
      "order_class": "",
      "order_type": "market",
      "type": "market",
      "side": "buy",
      "position_intent": "buy_to_open",
      "time_in_force": "day",
      "limit_price": None,
      "stop_price": None,
      "status": "filled",
      "extended_hours": False,
      "legs": None,
      "trail_percent": None,
      "trail_price": None,
      "hwm": None,
      "subtag": None,
      "source": "access_key"
    }
]
